# Nav 赛道现场比赛规则
中文版 | [English Version](./onsite_competition_rules_en-US.md)

## 1. 任务描述
本赛道任务旨在构建具备语言理解能力的多模态移动机器人导航系统。参赛者需设计感知-决策模型，实现从自我中心视觉感知、语言指令理解、历史轨迹建模到导航动作预测的完整流程。参赛算法将在真实环境中，驱动机器人在语言引导下完成室内导航任务，并需具备应对视角抖动、高度变化及局部避障等挑战的能力，实现稳健、安全的视觉语言导航行为。

主要挑战包括：
- 有效融合语言与视觉信息，支撑感知—决策—控制的一体化流程；
- 在真实机器人平台上运行，稳健应对行走过程中的视角抖动、高度变化和局部避障问题；
- 面对复杂的室内环境与多样化的导航指令，提升模型在未知场景和新指令下的泛化能力。

## 2. 比赛环境与设备
### 2.1 挑战场地布置
本次挑战将会搭建一个真实装修的住宅空间，由几个相连接的房间组成，其中将包含客厅、卧室、厨房、走廊、洗手间等常见房间。比赛场地包含普通家庭中常见的家具与装饰。

### 2.2 机器人
本次挑战将会使用由主办团队统一提供的机器人，配置统一RGB-D摄像头，传感器安装位置、视角、及帧率等将在赛前通过官方统一规定。

参赛队伍将于10月18日到现场调试代码，代码需在比赛前一天提交。

## 3. 任务
### 3.1 任务设定
本次挑战的任务聚焦于机器人视觉-语言信息融合与跨房间端到端导航。主办方将预先设定约 10 条可实际执行的自然语言导航指令，并为每条指令提供对应的起始点和终止点真值坐标。

  - 每条指令需至少跨越 1 个房间；
  - 真值导航的路径长度在 5–20 米之间；
  - 指令的终点需准确、明确且无歧义。

## 4. 比赛
### 4.1 赛前准备
- 参赛队伍需在赛前参考github文档打包好比赛用镜像。
- 比赛现场将提供统一的调试时间和环境，允许使用与线上赛不同的模型权重，允许进行环境适配性配置修改，但禁止修改核心算法逻辑。

### 4.2 比赛过程
每支队伍开始挑战时将会提供十条固定顺序的指令，从第一条指令开始。
  - 移动机器人到达该指令的起始位置后，将指令输入给机器人后举手示意作为开始挑战的信号。
  - 指令执行过程中若中途失败，可选择重试，也可以选择跳过该指令，顺序执行下一条未执行指令。
  - 每条指令可重试3次，若3次失败，则必须跳过该指令。（失败指选手选择重新开始，或其他条件，如超时，冲撞障碍物，人为干预等）
  - 已经跳过的指令不能重复执行。
  - 每次测试前需重置算法状态并清除所有前序执行过程中获取的观测缓存。

### 4.3 时间限制
每条指令的最长运行时间为5分钟。每支队伍完整的最长比赛时间为55分钟，其中包括指令抽取、前往起始点、关于是否重复尝试还是跳过指令等比赛相关内容的讨论。若到达最长比赛时间且仍在测试中，将以结束时间所在位置为终点对本次执行计分，剩余未测试指令均视为跳过。

### 4.4 公平性
参赛选手不得通过任何不正当手段获取优势，相关限制包括：
  - 禁止在比赛前为机器人提前构建地图；
  - 比赛过程中，除修改输入指令和修复程序运行卡死的Bug外，不得更改与算法相关的代码；
  - 前往起始点的过程由参赛者使用遥控器操控，并由裁判确认机器人已抵达起始位置和朝向方可开始，在执行导航指令期间严禁人工干预机器人；
  - 参赛运行镜像需在赛前提交，比赛过程中禁止联网更新。

### 4.5 裁判
每场比赛由主办方两名裁判在场外通过场地监控系统执裁。裁判不进入赛场，全程依靠监控进行实时观测与取证，并保留录像。机器人由主办方在统一控制台进行启动/暂停/终止，裁判拥有远程紧急停止（E-Stop）权限。裁判应全程保持公正，并对不合理行为通过远程方式及时制止与记录处理。赛场画面通过监控信号全程直播。

## 5. 评分细则
### 5.1 线下赛
比赛采用加分制度。每支队伍初始分为 0 分。每条指令的多次尝试将独立计分，并仅取该指令的最高得分计入总分。

**加分规则**：
- 成功完成1条指令，总分增加 10 分，并记录该指令的完成时间。（成功条件：在比赛中，每条指令均对应一个目标位置。目标位置定义为半径 2 米的圆形区域（不穿墙），机器人最终停止在该范围即可判定为该条指令导航成功。）

**扣分规则**：
- 若机器人频繁刮蹭（5次）或直接撞击障碍物，本次导航将被强制终止，该条指令不计分。

| Action | Score |
|:--|:--:|
| 抵达目标 | +10 |
| 连续碰撞或撞击 | 本次不计分 |

有连续撞击趋势裁判有权终止当前机器人行为，如果是单次前进行为末尾抵近障碍物，可算一次刮蹭，由现场裁判判断撞击剧烈程度。

**线下计分规则**：
- 根据得分计算出 SR （Success Rate），得分除以总分得到成功率。

### 5.2  最终成绩
最终结果由线上阶段与线下阶段成绩加权计算：
- **最终成绩计算**：最终积分 = 线上成功率 × 40% + 线下成功率 × 60%
